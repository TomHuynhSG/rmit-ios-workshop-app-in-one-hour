<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RMIT Casino Game Guide (Part 2) - COSC3062</title>
    <link rel="icon" href="../assets/images/rmit-logo.png" type="image/png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <link rel="stylesheet" href="../css/base-theme.css">
    <link rel="stylesheet" href="../css/extended-header.css">
    <link rel="stylesheet" href="../css/collapsible.css">
    <link rel="stylesheet" href="../css/code-styles.css">
    <link rel="stylesheet" href="../css/shared-styles.css">
    <style>
        .logo { height: 60px; }
        .university-name { font-size: 1.75rem; }
        header .intro { max-width: 700px; }
        .cheatsheet-section > h2.collapsible-header {
            font-size: 2rem;
            color: var(--heading-color);
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--border-color);
            font-weight: 600;
        }
        .grid-container {
            grid-template-columns: repeat(auto-fit, minmax(450px, 1fr));
            gap: 20px;
        }
        .card { padding: 20px; }
        pre { margin-bottom: 10px; }
        .instruction-step.card { padding: 20px; }
        .card ul, .card ol {
            padding-left: 20px;
        }
        .card ul {
            list-style-type: disc;
        }
    </style>
</head>
<body>

    <header>
        <div class="container">
            <div class="back-to-home-container">
                <a href="../index.html" class="back-to-home-button">&larr; Back to Home</a>
            </div>
            <div class="university-branding">
                <img src="https://sites.rmit.edu.au/artschoolgraduates/files/2022/10/rmit-logo-red.png" alt="RMIT University Logo" class="logo">
                <span class="university-name">RMIT University</span>
            </div>
            <h1>RMIT Casino Game (Part 2) <span>Step by Step Guide</span></h1>
            <p class="intro">This is <strong>Part 2</strong> of our beginner-friendly, step-by-step guide to building the RMIT Casino app. This guide will help you transform the project from Part 1 into the final target project. Each step builds upon the previous one, gradually adding features and complexity.</p>
        </div>
    </header>

    <main class="container">
        <section class="cheatsheet-section" id="project-setup">
            <h2 class="collapsible-header start-open">
                üöÄ A Note on Folder Structure
                <span class="collapse-icon"></span>
            </h2>
            <div class="collapsible-content">
                <div class="card instruction-step">
                    <p>Before we begin, the target project has a more organized folder structure. As you create new files in the following steps, you will also create new folders (<code>Views</code>, <code>Helpers</code>, <code>Sounds</code>) to place them in. You will also move existing files into these new folders to match the final structure.</p>
                    <img src="../assets/guide_imgs/rmit_casino_part_2/folder-structure.png" alt="Folder Structure" class="img-large">
                </div>
            </div>
        </section>

        <section class="cheatsheet-section" id="refactor-spin-logic">
            <h2 class="collapsible-header">
                ‚öôÔ∏è Step 1: Refactor the Spin Logic with map
                <span class="collapse-icon"></span>
            </h2>
            <div class="collapsible-content">
                <div class="card instruction-step">
                    <h3>Refactor the Spin Logic with map</h3>
                    <p><strong>Instruction:</strong>
                    Modify the <code>spinReels</code> function in <code>ContentView.swift</code>. Instead of updating each element of the <code>reels</code> array individually, use the <code>map</code> higher-order function for a more concise and modern Swift approach.</p>
                    <p><strong>Explanation:</strong>
                    The <code>map</code> function creates a new array by transforming each element of the original array. Here, we're transforming each element (represented by <code>_</code> since we don't need its old value) into a new random integer. This is cleaner and more efficient than accessing each array index one by one.</p>
                    <pre><code><span class="comment">// ContentView.swift</span>
<span class="keyword">import</span> <span class="type">SwiftUI</span>

<span class="keyword">struct</span> <span class="type">ContentView</span>: <span class="type">View</span> {
    <span class="keyword">let</span> icons = [<span class="string">"apple"</span>,<span class="string">"bar"</span>,<span class="string">"cherry"</span>,<span class="string">"clover"</span>,<span class="string">"diamond"</span>, <span class="string">"grape"</span>, <span class="string">"heart"</span>, <span class="string">"horseshoe"</span>,<span class="string">"lemon"</span>,<span class="string">"melon"</span>,<span class="string">"money"</span>,<span class="string">"orange"</span>]
    
    <span class="property-wrapper">@State</span> <span class="keyword">private</span> <span class="keyword">var</span> reels = [6, 3, 1]
    
    <span class="keyword">func</span> <span class="function">spinReels</span>() {
        <span class="comment">// MODIFY THIS FUNCTION</span>
        reels = reels.<span class="function">map</span>({ _ <span class="keyword">in</span>
            <span class="type">Int</span>.<span class="function">random</span>(in: 0...icons.count - 1)
        })
    }
    
    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> {
        <span class="comment">// ... rest of the body remains the same</span>
    }
}</code></pre>
                    <img src="../assets/guide_imgs/rmit_casino_part_2/step-1-spin-logic.gif" alt="Step 1 Spin Logic" class="img-large">
                </div>
            </div>
        </section>

        <section class="cheatsheet-section" id="add-state-variables">
            <h2 class="collapsible-header">
                üìä Step 2: Add State Variables for Game Data
                <span class="collapse-icon"></span>
            </h2>
            <div class="collapsible-content">
                <div class="card instruction-step">
                    <h3>Add State Variables for Game Data</h3>
                    <p><strong>Instruction:</strong>
                    In <code>ContentView.swift</code>, declare new <code>@State</code> variables to manage the player's coins, the current bet amount, and the high score. Initialize them with starting values.</p>
                    <p><strong>Explanation:</strong>
                    <code>@State</code> is a property wrapper that allows us to store and modify values that affect the UI. When a <code>@State</code> variable changes, SwiftUI automatically re-renders the parts of the view that depend on it. We'll use these to make our scoreboards and game logic dynamic.</p>
                    <pre><code><span class="comment">// ContentView.swift</span>
<span class="keyword">struct</span> <span class="type">ContentView</span>: <span class="type">View</span> {
    <span class="keyword">let</span> icons = [<span class="string">"apple"</span>,<span class="string">"bar"</span>,<span class="string">"cherry"</span>,<span class="string">"clover"</span>,<span class="string">"diamond"</span>, <span class="string">"grape"</span>, <span class="string">"heart"</span>, <span class="string">"horseshoe"</span>,<span class="string">"lemon"</span>,<span class="string">"melon"</span>,<span class="string">"money"</span>,<span class="string">"orange"</span>]
    
    <span class="property-wrapper">@State</span> <span class="keyword">private</span> <span class="keyword">var</span> reels = [6, 3, 1]
    <span class="comment">// ADD THESE STATE VARIABLES</span>
    <span class="property-wrapper">@State</span> <span class="keyword">var</span> coins = 100
    <span class="property-wrapper">@State</span> <span class="keyword">var</span> betAmount = 10
    <span class="property-wrapper">@State</span> <span class="keyword">var</span> highscore = 0
    
    <span class="keyword">func</span> <span class="function">spinReels</span>() {
        <span class="comment">// ...</span>
    }
}</code></pre>
                </div>
            </div>
        </section>

        <section class="cheatsheet-section" id="display-dynamic-data">
            <h2 class="collapsible-header">
                üîó Step 3: Display Dynamic Game Data
                <span class="collapse-icon"></span>
            </h2>
            <div class="collapsible-content">
                <div class="card instruction-step">
                    <h3>Connect State Variables to the UI</h3>
                    <p><strong>Instruction:</strong>
                    In <code>ContentView.swift</code>, find the two scoreboards in the <code>body</code>. Replace the hardcoded text values (<code>"100"</code> and <code>"500"</code>) with the new state variables <code>coins</code> and <code>highscore</code> using string interpolation.</p>
                    <p><strong>Explanation:</strong>
                    Now the text views will display the current values of our state variables. We use string interpolation <code>\()</code> to embed the integer values from our variables directly into the <code>Text</code> views. Whenever <code>coins</code> or <code>highscore</code> changes, the UI will update automatically.</p>
                    <pre><code><span class="comment">// ContentView.swift</span>
<span class="comment">// ...</span>
                <span class="comment">// MARK: - Score boards</span>
                <span class="function">HStack</span> {
                    <span class="function">HStack</span> {
                        <span class="function">Text</span>(<span class="string">"Your\nMoney"</span>.<span class="function">uppercased</span>())
                            .<span class="function">multilineTextAlignment</span>(.leading)
                            .<span class="function">modifier</span>(<span class="function">scoreLabelStyle</span>())
                        
                        <span class="comment">// MODIFY THIS LINE</span>
                        <span class="function">Text</span>(<span class="string">"\(coins)"</span>)
                            .<span class="function">modifier</span>(<span class="function">scoreNumberStyle</span>())
                    }
                    .<span class="function">modifier</span>(<span class="function">scoreCapsuleStyle</span>())
                    
                    <span class="function">Spacer</span>()
                    
                    <span class="function">HStack</span> {
                        <span class="comment">// MODIFY THIS LINE</span>
                        <span class="function">Text</span>(<span class="string">"\(highscore)"</span>)
                            .<span class="function">modifier</span>(<span class="function">scoreNumberStyle</span>())
                        
                        <span class="function">Text</span>(<span class="string">"High\nScore"</span>.<span class="function">uppercased</span>())
                            .<span class="function">multilineTextAlignment</span>(.trailing)
                            .<span class="function">foregroundStyle</span>(<span class="function">Color</span>.colorWhiteRMIT)
                            .<span class="function">modifier</span>(<span class="function">scoreLabelStyle</span>())
                        
                    }
                    .<span class="function">modifier</span>(<span class="function">scoreCapsuleStyle</span>())
                }
<span class="comment">// ...</span></code></pre>
                </div>
            </div>
        </section>

        <section class="cheatsheet-section" id="implement-core-logic">
            <h2 class="collapsible-header">
                üß† Step 4: Implement Core Game Logic
                <span class="collapse-icon"></span>
            </h2>
            <div class="collapsible-content">
                <div class="card instruction-step">
                    <h3>Implement Core Game Logic</h3>
                    <p><strong>Instruction:</strong>
                    <ol>
                        <li>Add three new functions to <code>ContentView.swift</code>: <code>playerWins()</code>, <code>playerLoses()</code>, and <code>checkWinning()</code>.</li>
                        <li>Call <code>checkWinning()</code> from the spin button's action after <code>spinReels()</code>.</li>
                    </ol>
                    </p>
                    <p><strong>Explanation:</strong>
                    <ul>
                        <li><code>playerWins()</code>: Increases the player's <code>coins</code> by 10 times the <code>betAmount</code>.</li>
                        <li><code>playerLoses()</code>: Decreases the player's <code>coins</code> by the <code>betAmount</code>.</li>
                        <li><code>checkWinning()</code>: This is the core logic that checks if all three reels show the same icon. If they do, it calls <code>playerWins()</code>; otherwise, it calls <code>playerLoses()</code>. We call this function every time the reels are spun to determine the outcome.</li>
                    </ul>
                    </p>
                    <pre><code><span class="comment">// ContentView.swift</span>
<span class="comment">// ...</span>
    <span class="keyword">func</span> <span class="function">spinReels</span>() {
        reels = reels.<span class="function">map</span>({ _ <span class="keyword">in</span>
            <span class="type">Int</span>.<span class="function">random</span>(in: 0...icons.count - 1)
        })
    }
    
    <span class="comment">// ADD THESE FUNCTIONS</span>
    <span class="comment">// MARK: - Check Winning Logic</span>
    <span class="keyword">func</span> <span class="function">checkWinning</span>() {
        <span class="keyword">if</span> reels[0] == reels [1] && reels[1] == reels [2] {
            <span class="comment">// Winning logic</span>
            <span class="function">playerWins</span>()
        } <span class="keyword">else</span> {
            <span class="comment">// Losing logic</span>
            <span class="function">playerLoses</span>()
        }
    }
    
    <span class="comment">// MARK: - Player Winning Logic</span>
    <span class="keyword">func</span> <span class="function">playerWins</span>() {
        coins += betAmount*10
    }
    
    <span class="comment">// MARK: - Player Lose Logic</span>
    <span class="keyword">func</span> <span class="function">playerLoses</span>(){
        coins -= betAmount
    }
    
    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> {
<span class="comment">// ...</span>
                    <span class="comment">// MARK: - Spin Button</span>
                    <span class="function">Button</span> {
                        <span class="function">spinReels</span>()
                        <span class="comment">// ADD THIS LINE</span>
                        <span class="function">checkWinning</span>()
                    } label: {
<span class="comment">// ...</span></code></pre>
                </div>
            </div>
        </section>

        <section class="cheatsheet-section" id="implement-highscore-logic">
            <h2 class="collapsible-header">
                üèÜ Step 5: Implement High Score Logic
                <span class="collapse-icon"></span>
            </h2>
            <div class="collapsible-content">
                <div class="card instruction-step">
                    <h3>Implement High Score Logic</h3>
                    <p><strong>Instruction:</strong>
                    <ol>
                        <li>Create a new function <code>newHighScore()</code>.</li>
                        <li>Update the <code>checkWinning()</code> function to check if the new coin total is a new high score and call <code>newHighScore()</code> if it is.</li>
                    </ol>
                    </p>
                    <p><strong>Explanation:</strong>
                    After a player wins, we need to check if their new coin total is greater than the current high score. If it is, the <code>newHighScore()</code> function updates the <code>highscore</code> variable. This ensures we are always tracking the best score achieved in the current session.</p>
                    <pre><code><span class="comment">// ContentView.swift</span>
<span class="comment">// ...</span>
    <span class="comment">// MARK: - Check Winning Logic</span>
    <span class="keyword">func</span> <span class="function">checkWinning</span>() {
        <span class="keyword">if</span> reels[0] == reels [1] && reels[1] == reels [2] {
            <span class="comment">// Winning logic</span>
            <span class="function">playerWins</span>()
            
            <span class="comment">// ADD THIS LOGIC</span>
            <span class="keyword">if</span> coins > highscore {
                <span class="function">newHighScore</span>()
            }
            
        } <span class="keyword">else</span> {
            <span class="comment">// Losing logic</span>
            <span class="function">playerLoses</span>()
        }
    }
    
    <span class="comment">// MARK: - Player Winning Logic</span>
    <span class="keyword">func</span> <span class="function">playerWins</span>() {
        coins += betAmount*10
    }

    <span class="comment">// ADD THIS FUNCTION</span>
    <span class="comment">// MARK: - Highscore Logic</span>
    <span class="keyword">func</span> <span class="function">newHighScore</span>() {
        highscore = coins
    }
    
    <span class="comment">// MARK: - Player Lose Logic</span>
<span class="comment">// ...</span></code></pre>
                </div>
            </div>
        </section>

        <section class="cheatsheet-section" id="add-bet-selection-state">
            <h2 class="collapsible-header">
                üí∞ Step 6: Add State for Bet Selection
                <span class="collapse-icon"></span>
            </h2>
            <div class="collapsible-content">
                <div class="card instruction-step">
                    <h3>Add State for Bet Selection</h3>
                    <p><strong>Instruction:</strong>
                    In <code>ContentView.swift</code>, add two new boolean <code>@State</code> variables, <code>isChooseBet10</code> and <code>isChooseBet20</code>, to track which bet amount is currently active. Initialize <code>isChooseBet10</code> to <code>true</code>.</p>
                    <p><strong>Explanation:</strong>
                    These boolean flags will help us manage the UI for the bet selection. We can use them to show or hide the casino chip image next to the selected bet amount, providing clear visual feedback to the player about their current bet.</p>
                    <pre><code><span class="comment">// ContentView.swift</span>
<span class="comment">// ...</span>
    <span class="property-wrapper">@State</span> <span class="keyword">var</span> betAmount = 10
    <span class="property-wrapper">@State</span> <span class="keyword">var</span> highscore = 0
    
    <span class="comment">// ADD THESE STATE VARIABLES</span>
    <span class="property-wrapper">@State</span> <span class="keyword">var</span> isChooseBet10 = <span class="literal">true</span>
    <span class="property-wrapper">@State</span> <span class="keyword">var</span> isChooseBet20 = <span class="literal">false</span>
    
    <span class="keyword">func</span> <span class="function">spinReels</span>() {
<span class="comment">// ...</span></code></pre>
                </div>
            </div>
        </section>

        <section class="cheatsheet-section" id="implement-betting-functionality">
            <h2 class="collapsible-header">
                üëÜ Step 7: Implement Betting Functionality
                <span class="collapse-icon"></span>
            </h2>
            <div class="collapsible-content">
                <div class="card instruction-step">
                    <h3>Implement Betting Functionality</h3>
                    <p><strong>Instruction:</strong>
                    <ol>
                        <li>Create two new functions, <code>chooseBet10()</code> and <code>chooseBet20()</code>.</li>
                        <li>In the <code>body</code>, update the footer UI to wrap the bet amounts in <code>Button</code>s that call these functions.</li>
                        <li>Use the <code>isChooseBet10</code> and <code>isChooseBet20</code> state variables to control the opacity of the casino chip images.</li>
                    </ol>
                    </p>
                    <p><strong>Explanation:</strong>
                    <ul>
                        <li>The <code>chooseBet10()</code> and <code>chooseBet20()</code> functions will update the <code>betAmount</code> and toggle the boolean flags.</li>
                        <li>We will replace the static <code>Text</code> and <code>Image</code> views in the footer with interactive <code>Button</code>s.</li>
                        <li>The <code>.opacity()</code> modifier on the casino chip <code>Image</code> will now be controlled by our state variables, making the chip appear only for the active bet.</li>
                    </ul>
                    </p>
                    <pre><code><span class="comment">// ContentView.swift</span>
<span class="comment">// ...</span>
    <span class="keyword">func</span> <span class="function">playerLoses</span>(){
        coins -= betAmount
    }

    <span class="comment">// ADD THESE FUNCTIONS</span>
    <span class="comment">// MARK: - Bet 20 Logic</span>
    <span class="keyword">func</span> <span class="function">chooseBet20</span>(){
        betAmount=20
        isChooseBet10=<span class="literal">false</span>
        isChooseBet20=<span class="literal">true</span>
    }
    <span class="comment">// MARK: - Bet 10 Logic</span>
    <span class="keyword">func</span> <span class="function">chooseBet10</span>(){
        betAmount=10
        isChooseBet10=<span class="literal">true</span>
        isChooseBet20=<span class="literal">false</span>
    }
    
    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> {
<span class="comment">// ...</span>
                <span class="comment">// MARK: - Footer</span>
                <span class="comment">// MODIFY THE ENTIRE FOOTER HSTACK</span>
                <span class="function">HStack</span> {
                    <span class="comment">// MARK: - Bet 10</span>
                    <span class="function">Button</span>(action: {
                        <span class="function">chooseBet10</span>()
                    }, label: {
                        <span class="function">HStack</span> (spacing: 30) {
                            <span class="function">Text</span>(<span class="string">"10"</span>)
                                .<span class="function">modifier</span>(<span class="function">betCapsuleStyle</span>())
                            
                            <span class="function">Image</span>(<span class="string">"casino-chips"</span>)
                                .<span class="function">resizable</span>()
                                .<span class="function">modifier</span>(<span class="function">casinoChipStyle</span>())
                                .<span class="function">opacity</span>(isChooseBet10 ? 1 : 0)
                        }
                    })
                    
                    <span class="function">Spacer</span>()
                    
                    <span class="comment">// MARK: - Bet 20</span>
                    <span class="function">Button</span>(action: {
                        <span class="function">chooseBet20</span>()
                    }, label: {
                        <span class="function">HStack</span> (spacing: 30) {
                            <span class="function">Image</span>(<span class="string">"casino-chips"</span>)
                                .<span class="function">resizable</span>()
                                .<span class="function">modifier</span>(<span class="function">casinoChipStyle</span>())
                                .<span class="function">opacity</span>(isChooseBet20 ? 1 : 0)
                            
                            <span class="function">Text</span>(<span class="string">"20"</span>)
                                .<span class="function">modifier</span>(<span class="function">betCapsuleStyle</span>())
                        }
                    })
                }
                .<span class="function">padding</span>(.<span class="variable">horizontal</span>, 20)
<span class="comment">// ...</span></code></pre>
                    <img src="../assets/guide_imgs/rmit_casino_part_2/step-7-betting-functionality.gif" alt="Step 7 Betting Functionality" class="img-large">
                </div>
            </div>
        </section>

        <section class="cheatsheet-section" id="persist-highscore">
            <h2 class="collapsible-header">
                üíæ Step 8: Persist High Score with AppStorage
                <span class="collapse-icon"></span>
            </h2>
            <div class="collapsible-content">
                <div class="card instruction-step">
                    <h3>Persist High Score with AppStorage</h3>
                    <p><strong>Instruction:</strong>
                    In <code>ContentView.swift</code>, change the <code>@State</code> property wrapper for the <code>highscore</code> variable to <code>@AppStorage("highscore")</code>.</p>
                    <p><strong>Explanation:</strong>
                    <code>@AppStorage</code> is a property wrapper that automatically saves and loads a value from the device's <code>UserDefaults</code>. By using <code>@AppStorage("highscore")</code>, we are telling SwiftUI to store the <code>highscore</code> value under the key "highscore". This makes the high score persist even after the user closes and reopens the app.</p>
                    <pre><code><span class="comment">// ContentView.swift</span>
<span class="comment">// ...</span>
    <span class="property-wrapper">@State</span> <span class="keyword">private</span> <span class="keyword">var</span> reels = [0,1,2]
    <span class="property-wrapper">@State</span> <span class="keyword">var</span> coins = 100
    <span class="property-wrapper">@State</span> <span class="keyword">var</span> betAmount = 10
    <span class="comment">// MODIFY THIS LINE</span>
    <span class="property-wrapper">@AppStorage</span>(<span class="string">"highscore"</span>) <span class="keyword">var</span> highscore = 0
    
    <span class="property-wrapper">@State</span> <span class="keyword">var</span> isChooseBet10 = <span class="literal">true</span>
<span class="comment">// ...</span></code></pre>
                    <img src="../assets/guide_imgs/rmit_casino_part_2/step-8-persist-highscore.gif" alt="Step 8 Persist Highscore" class="img-large">
                </div>
            </div>
        </section>

        <section class="cheatsheet-section" id="implement-reel-animation">
            <h2 class="collapsible-header">
                üé¨ Step 9: Implement Reel Animation
                <span class="collapse-icon"></span>
            </h2>
            <div class="collapsible-content">
                <div class="card instruction-step">
                    <h3>How Animation Works in This Project (Conceptual Overview)</h3>
                    <p>The animation in this project is centered around the slot machine reels. The goal is to create a visual effect that simulates the reels "spinning" and landing on new symbols when the user presses the spin button.</p>
                    <p>The project achieves this using SwiftUI's declarative animation system. Instead of manually defining each frame of the animation, we define two distinct visual states for the reel icons and tell SwiftUI how to transition between them.</p>
                    <p>Here's the core concept:</p>
                    <ol>
                        <li><strong>State-Driven UI:</strong> The appearance of the reel icons (their position and visibility) is directly tied to a single state variable, <code>animatingIcon</code>, which is a boolean (<code>true</code> or <code>false</code>).
                            <ul>
                                <li><strong>State 1 (<code>animatingIcon</code> is <code>true</code>):</strong> The icon is fully visible (<code>opacity: 1</code>) and in its final position (<code>offset: 0</code>). This is the "at rest" state.</li>
                                <li><strong>State 2 (<code>animatingIcon</code> is <code>false</code>):</strong> The icon is invisible (<code>opacity: 0</code>) and moved upwards (<code>offset: -50</code>). This is the "spinning" or "hidden" state.</li>
                            </ul>
                        </li>
                        <li><strong>Triggering the Animation:</strong> When the user taps the "Spin" button, the code doesn't directly move the images. Instead, it rapidly changes the <code>animatingIcon</code> state variable inside special <code>withAnimation</code> blocks.</li>
                        <li><strong>The Animation Sequence:</strong>
                            <ul>
                                <li><strong>Phase 1 (Disappear):</strong> The <code>animatingIcon</code> state is changed from <code>true</code> to <code>false</code>. SwiftUI automatically animates the transition, causing the icons to slide up and fade out. At the same time, the underlying data for the reels is changed to new random symbols.</li>
                                <li><strong>Phase 2 (Reappear):</strong> After a short delay, the <code>animatingIcon</code> state is changed back from <code>false</code> to <code>true</code>. SwiftUI animates this transition as well. Since the underlying data has already changed, the *new* icons slide down from above and fade in, completing the "spin" effect.</li>
                            </ul>
                        </li>
                    </ol>
                    <p>This approach is powerful because it separates the animation logic (the <code>withAnimation</code> blocks) from the view's appearance (defined in <code>ReelView</code>). The view only needs to know how to draw itself for a given state, and SwiftUI handles the rest.</p>
                </div>
                <div class="card instruction-step">
                    <h3>9.1: Add Animation State</h3>
                    <p><strong>Instruction:</strong>
                    Add a new <code>@State</code> boolean variable <code>animatingIcon</code> to <code>ContentView.swift</code> and initialize it to <code>true</code>.</p>
                    <p><strong>Explanation:</strong>
                    This state variable is the master switch for our animation. Its initial value is <code>true</code> so the icons are visible when the app launches. All three <code>ReelView</code> instances will be linked to this single variable, ensuring they animate in perfect sync.</p>
                    <pre><code><span class="comment">// ContentView.swift</span>
<span class="comment">// ...</span>
    <span class="property-wrapper">@State</span> <span class="keyword">var</span> isChooseBet10 = <span class="literal">true</span>
    <span class="property-wrapper">@State</span> <span class="keyword">var</span> isChooseBet20 = <span class="literal">false</span>
    
    <span class="comment">// ADD THIS STATE</span>
    <span class="property-wrapper">@State</span> <span class="keyword">var</span> animatingIcon = <span class="literal">true</span>
    
    <span class="comment">// MARK: - Spin Logic</span>
<span class="comment">// ...</span></code></pre>
                </div>
                <div class="card instruction-step">
                    <h3>9.2: Create a Reusable `ReelView`</h3>
                    <p><strong>Instruction:</strong>
                    <ol>
                        <li>In Xcode, create a <strong>new group</strong> (folder) named <code>Views</code>.</li>
                        <li>Move <code>ContentView.swift</code>, <code>LogoView.swift</code>, and <code>RMITCasinoLiveCodeApp.swift</code> into this new <code>Views</code> folder.</li>
                        <li>Inside the <code>Views</code> folder, create a new <strong>SwiftUI View</strong> file named <code>ReelView.swift</code>.</li>
                        <li>Copy the <code>ZStack</code> code for a single reel from <code>ContentView</code> into this new file and adapt it to use properties.</li>
                    </ol>
                    </p>
                    <p><strong>Explanation:</strong>
                    Extracting UI components into their own views is a fundamental practice in SwiftUI. It makes our code cleaner, more organized, and reusable. The <code>ReelView</code> is designed to be a self-contained component responsible for displaying one reel background and one symbol icon. It accepts two parameters: the <code>reelIcon</code> (the name of the image to display) and <code>animatingIcon</code> (the boolean that controls the animation state).</p>
                    <pre><code><span class="comment">// Create new file Views/ReelView.swift</span>
<span class="keyword">import</span> <span class="type">SwiftUI</span>

<span class="keyword">struct</span> <span class="type">ReelView</span>: <span class="type">View</span> {
    <span class="keyword">var</span> reelIcon: <span class="type">String</span>
    <span class="keyword">var</span> animatingIcon: <span class="type">Bool</span>
    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> {
        <span class="function">ZStack</span> {
            <span class="function">Image</span>(<span class="string">"reel"</span>)
                .<span class="function">resizable</span>()
                .<span class="function">modifier</span>(<span class="function">reelImageStyle</span>())
            <span class="function">Image</span>(reelIcon)
                .<span class="function">resizable</span>()
                .<span class="function">modifier</span>(<span class="function">iconImageStyle</span>())
        }
    }
}

<span class="comment">#Preview {</span>
    <span class="function">ReelView</span>(reelIcon: <span class="string">"apple"</span>, animatingIcon: <span class="literal">true</span>)
<span class="comment">}</span></code></pre>
                </div>
                <div class="card instruction-step">
                    <h3>9.3: Add Animation Modifiers to `ReelView`</h3>
                    <p><strong>Instruction:</strong>
                    In <code>ReelView.swift</code>, add <code>.opacity()</code> and <code>.offset()</code> modifiers to the icon <code>Image</code>. These modifiers will be controlled by the <code>animatingIcon</code> property passed into the view.</p>
                    <p><strong>Explanation:</strong>
                    These two conditional modifiers are the heart of the visual effect. They directly link the view's appearance to the <code>animatingIcon</code> state.
                    <ul>
                        <li><code>.opacity(animatingIcon ? 1 : 0)</code>: This is a ternary operator that reads: "If <code>animatingIcon</code> is true, set opacity to 1 (visible). Otherwise, set it to 0 (invisible)."</li>
                        <li><code>.offset(y: animatingIcon ? 0 : -50)</code>: Similarly, this reads: "If <code>animatingIcon</code> is true, keep the vertical offset at 0. Otherwise, move the icon up by 50 points."</li>
                    </ul>
                    When SwiftUI animates the change of animatingIcon, it will smoothly transition the values of opacity and offset between these two states.
                    </p>
                    <pre><code><span class="comment">// Views/ReelView.swift</span>
<span class="comment">// ...</span>
            <span class="function">Image</span>(reelIcon)
                .<span class="function">resizable</span>()
                .<span class="function">modifier</span>(<span class="function">iconImageStyle</span>())
                <span class="comment">// ADD THESE MODIFIERS</span>
                .<span class="function">opacity</span>(animatingIcon ? 1 : 0)
                .<span class="function">offset</span>(y: animatingIcon ? 0 : -50)
        }
    }
}
<span class="comment">// ...</span></code></pre>
                </div>
                <div class="card instruction-step">
                    <h3>9.4: Use `ReelView` in `ContentView`</h3>
                    <p><strong>Instruction:</strong>
                    In <code>ContentView.swift</code>, remove the old <code>ZStack</code> code for the three reels and replace them with three instances of your new <code>ReelView</code>.</p>
                    <p><strong>Explanation:</strong>
                    Our <code>ContentView</code> is now much cleaner. We are composing our UI from smaller, specialized views. We pass the correct icon name from our <code>reels</code> array and the single <code>animatingIcon</code> state to each <code>ReelView</code> instance. This ensures that all three reels are linked to the same animation trigger and will always animate together.</p>
                    <pre><code><span class="comment">// ContentView.swift</span>
<span class="comment">// ...</span>
                <span class="comment">// MARK: - Slot Machine</span>
                <span class="function">VStack</span> {
                    <span class="comment">// REMOVE THE OLD REEL ZSTACKS AND REPLACE WITH THIS</span>
                    
                    <span class="comment">// MARK: - First Reel</span>
                    <span class="function">ReelView</span>(reelIcon: icons[reels[0]], animatingIcon: animatingIcon)
                    
                    <span class="function">HStack</span> {
                        <span class="comment">// MARK: - Second Reel</span>
                        <span class="function">ReelView</span>(reelIcon: icons[reels[1]], animatingIcon: animatingIcon)
                        
                        <span class="function">Spacer</span>()
                        
                        <span class="comment">// MARK: - Third Reel</span>
                        <span class="function">ReelView</span>(reelIcon: icons[reels[2]], animatingIcon: animatingIcon)
                    }
                    
                    <span class="comment">// MARK: - Spin Button</span>
                    <span class="function">Button</span> {
<span class="comment">// ...</span></code></pre>
                </div>
                <div class="card instruction-step">
                    <h3>9.5: Trigger Animation on Spin</h3>
                    <p><strong>Instruction:</strong>
                    In <code>ContentView.swift</code>, wrap the logic inside the Spin <code>Button</code>'s action with <code>withAnimation</code> blocks.</p>
                    <p><strong>Explanation:</strong>
                    This is the final and most crucial step. The "Spin" button's action is where the state is changed in a carefully timed sequence using <code>withAnimation</code> blocks.
                    <ul>
                        <li><strong>Phase 1 (Icons Disappear):</strong> The first state change is wrapped in <code>withAnimation(Animation.easeOut(duration: 0.3))</code>. Inside this block, <code>animatingIcon</code> is set to <code>false</code>. This tells SwiftUI to animate the change from <code>true</code> to <code>false</code> over 0.3 seconds, causing all three <code>ReelView</code> icons to slide up and fade out. The <code>spinReels()</code> function is called within the same block, which updates the <code>reels</code> array with new random symbols *while the icons are invisible*.</li>
                        <li><strong>Phase 2 (New Icons Appear):</strong> The second state change is wrapped in <code>withAnimation(Animation.easeOut(duration: 0.7).delay(0.3))</code>. The <code>.delay(0.3)</code> is critical; it ensures this animation starts only after the first one has finished. Inside this block, <code>animatingIcon</code> is set back to <code>true</code>. SwiftUI animates the change from <code>false</code> to <code>true</code> over 0.7 seconds. Because the <code>reels</code> data has already been updated, it's the *new* icons that now slide down and fade into view.</li>
                    </ul>
                    The <code>checkWinning()</code> and <code>isGameOver()</code> functions are called immediately after triggering the animations. They don't need to wait for the animations to finish, as they operate on the final state of the data.
                    </p>
                    <pre><code><span class="comment">// ContentView.swift</span>
<span class="comment">// ...</span>
                    <span class="comment">// MARK: - Spin Button</span>
                    <span class="function">Button</span>(action: {
                        <span class="comment">// MODIFY THE BUTTON ACTION</span>
                        
                        <span class="comment">// 1. move up, disappear and change reels</span>
                        <span class="function">withAnimation</span>(<span class="type">Animation</span>.<span class="function">easeOut</span>(duration: 0.3)) {
                            animatingIcon = <span class="literal">false</span>
                            <span class="function">spinReels</span>()
                        }
                        
                        <span class="comment">// 2. move down, appear</span>
                        <span class="function">withAnimation</span>(<span class="type">Animation</span>.<span class="function">easeOut</span>(duration: 0.7).<span class="function">delay</span>(0.3)) {
                            animatingIcon = <span class="literal">true</span>
                        }
                        
                        <span class="function">checkWinning</span>()
                        
                    }, label: {
                        <span class="function">Image</span>(<span class="string">"spin"</span>)
                            .<span class="function">resizable</span>()
                            .<span class="function">modifier</span>(<span class="function">reelImageStyle</span>())
                    })
<span class="comment">// ...</span></code></pre>
                    <img src="../assets/guide_imgs/rmit_casino_part_2/step-9-reel-animation.gif" alt="Step 9 Reel Animation" class="img-large">
                </div>
            </div>
        </section>

        <section class="cheatsheet-section" id="add-sound-files">
            <h2 class="collapsible-header">
                üéµ Step 10: Add Sound Files to the Project
                <span class="collapse-icon"></span>
            </h2>
            <div class="collapsible-content">
                <div class="card instruction-step">
                    <h3>Add Sound Files to the Project</h3>
                    <p><strong>Instruction:</strong>
                    <ol>
                        <li>In the Xcode project navigator, create a <strong>new group</strong> (folder) named <code>Sounds</code>.</li>
                        <li>Drag and drop the provided <code>.mp3</code> files (<code>bet-chip.mp3</code>, <code>gameover.mp3</code>, <code>highscore.mp3</code>, <code>ring-up.mp3</code>, <code>spin.mp3</code>, etc.) into this new <code>Sounds</code> folder.</li>
                        <li>When the "Choose options" dialog appears, make sure to check <strong><code>Copy items if needed</code></strong> and select your app's target.</li>
                    </ol>
                    </p>
                    <p><strong>Explanation:</strong>
                    This step adds the necessary audio assets to your app bundle so they can be accessed and played by the code we'll write in the next step. All game sound assets are available in the <a href="asset-gallery.html">Asset Gallery</a>.</p>
                    <img src="../assets/guide_imgs/rmit_casino_part_2/step-10-sound-files.png" alt="Step 10 Sound Files" class="img-large">
                </div>
            </div>
        </section>

        <section class="cheatsheet-section" id="create-sound-player-helper">
            <h2 class="collapsible-header">
                üéß Step 11: Create a Sound Player Helper
                <span class="collapse-icon"></span>
            </h2>
            <div class="collapsible-content">
                <div class="card instruction-step">
                    <h3>Create a Sound Player Helper</h3>
                    <p><strong>Instruction:</strong>
                    <ol>
                        <li>Create a <strong>new group</strong> (folder) named <code>Helpers</code>.</li>
                        <li>Move the existing <code>Modifiers.swift</code> file into this <code>Helpers</code> folder.</li>
                        <li>Inside <code>Helpers</code>, create a new <strong>Swift File</strong> named <code>PlaySound.swift</code>.</li>
                        <li>Add the provided code to this new file.</li>
                    </ol>
                    </p>
                    <p><strong>Explanation:</strong>
                    This helper file contains a reusable function, <code>playSound</code>, that uses Apple's <code>AVFoundation</code> framework to play audio files. It encapsulates the audio playing logic, keeping our <code>ContentView</code> cleaner. We declare a global <code>audioPlayer</code> variable to manage the audio playback.</p>
                    <pre><code><span class="comment">// Create new file Helpers/PlaySound.swift</span>
<span class="keyword">import</span> <span class="type">Foundation</span>
<span class="keyword">import</span> <span class="type">AVFoundation</span>

<span class="keyword">var</span> audioPlayer : <span class="type">AVAudioPlayer</span>?

<span class="keyword">func</span> <span class="function">playSound</span>(sound: <span class="type">String</span>, type: <span class="type">String</span>) {
    <span class="keyword">if</span> <span class="keyword">let</span> path = <span class="type">Bundle</span>.main.<span class="function">path</span>(forResource: sound, ofType: type) {
        <span class="keyword">do</span> {
            audioPlayer = <span class="keyword">try</span> <span class="type">AVAudioPlayer</span>(contentsOf: <span class="type">URL</span>(fileURLWithPath: path))
            audioPlayer?.<span class="function">play</span>()
        } <span class="keyword">catch</span> {
            <span class="function">print</span>(<span class="string">"ERROR: Could not find and play the sound file!"</span>)
        }
    }
}</code></pre>
                </div>
            </div>
        </section>

        <section class="cheatsheet-section" id="integrate-sound-effects">
            <h2 class="collapsible-header">
                üîä Step 12: Integrate Sound Effects
                <span class="collapse-icon"></span>
            </h2>
            <div class="collapsible-content">
                <div class="card instruction-step">
                    <h3>Integrate Sound Effects into the Game</h3>
                    <p><strong>Instruction:</strong>
                    In <code>ContentView.swift</code>, import <code>AVFoundation</code> and call the <code>playSound()</code> function at various logical points: when spinning, winning, getting a new high score, and changing bets.</p>
                    <p><strong>Explanation:</strong>
                    Now we're bringing the game to life with audio feedback. Each key player action will be accompanied by a corresponding sound effect, making the experience more immersive and engaging.</p>
                    <pre><code><span class="comment">// ContentView.swift</span>
<span class="comment">// ...</span>
    <span class="keyword">func</span> <span class="function">spinReels</span>(){
        reels = reels.<span class="function">map</span>({ _ <span class="keyword">in</span>
            <span class="type">Int</span>.<span class="function">random</span>(in: 0...icons.count-1)
        })
        <span class="comment">// ADD SOUND</span>
        <span class="function">playSound</span>(sound: <span class="string">"spin"</span>, type: <span class="string">"mp3"</span>)
    }
    
    
    <span class="comment">// MARK: - Check Winning Logic</span>
    <span class="keyword">func</span> <span class="function">checkWinning</span>() {
        <span class="keyword">if</span> reels[0] == reels [1] && reels[1] == reels [2] {
            <span class="comment">// Winning logic</span>
            <span class="function">playerWins</span>()
            
            <span class="keyword">if</span> coins > highscore {
                <span class="function">newHighScore</span>()
            } <span class="keyword">else</span> {
                <span class="comment">// ADD SOUND</span>
                <span class="function">playSound</span>(sound: <span class="string">"winning"</span>, type: <span class="string">"mp3"</span>)
            }
            
        } <span class="keyword">else</span> {
<span class="comment">// ...</span>
    <span class="comment">// MARK: - Highscore Logic</span>
    <span class="keyword">func</span> <span class="function">newHighScore</span>() {
        highscore = coins
        <span class="comment">// ADD SOUND</span>
        <span class="function">playSound</span>(sound: <span class="string">"highscore"</span>, type: <span class="string">"mp3"</span>)
    }
    
    <span class="comment">// MARK: - Player Lose Logic</span>
<span class="comment">// ...</span>
    <span class="comment">// MARK: - Bet 20 Logic</span>
    <span class="keyword">func</span> <span class="function">chooseBet20</span>(){
        betAmount=20
        isChooseBet10=<span class="literal">false</span>
        isChooseBet20=<span class="literal">true</span>
        <span class="comment">// ADD SOUND</span>
        <span class="function">playSound</span>(sound: <span class="string">"bet-chip"</span>, type: <span class="string">"mp3"</span>)
    }
    <span class="comment">// MARK: - Bet 10 Logic</span>
    <span class="keyword">func</span> <span class="function">chooseBet10</span>(){
        betAmount=10
        isChooseBet10=<span class="literal">true</span>
        isChooseBet20=<span class="literal">false</span>
        <span class="comment">// ADD SOUND</span>
        <span class="function">playSound</span>(sound: <span class="string">"bet-chip"</span>, type: <span class="string">"mp3"</span>)
    }
<span class="comment">// ...</span></code></pre>
                </div>
            </div>
        </section>

        <section class="cheatsheet-section" id="implement-game-over">
            <h2 class="collapsible-header">
                üíÄ Step 13: Implement the Game Over Feature
                <span class="collapse-icon"></span>
            </h2>
            <div class="collapsible-content">
                <div class="card instruction-step">
                    <h3>Implement the Game Over Feature</h3>
                    <p><strong>Instruction:</strong>
                    <ol>
                        <li>Add a new <code>@State</code> variable <code>showGameOverModal</code> to <code>ContentView.swift</code>.</li>
                        <li>Create a new function <code>isGameOver()</code> to check if coins are zero and set the modal state to <code>true</code>. Call this function after each spin.</li>
                        <li>Create a new <strong>SwiftUI View</strong> file in the <code>Views</code> folder named <code>GameOverView.swift</code> and add the provided content.</li>
                        <li>In <code>ContentView.swift</code>, add a <code>.blur()</code> modifier to the main <code>VStack</code> and overlay the <code>GameOverView</code> conditionally.</li>
                    </ol>
                    </p>
                    <p><strong>Explanation:</strong>
                    When the player runs out of coins, the game should end. The <code>isGameOver()</code> function handles this logic. We then display a modal <code>GameOverView</code> that informs the player and gives them an option to start a new game. The <code>.blur()</code> modifier on the main view adds a nice visual effect, focusing the user's attention on the game over screen.</p>
                    <pre><code><span class="comment">// Create new file Views/GameOverView.swift</span>
<span class="keyword">import</span> <span class="type">SwiftUI</span>

<span class="keyword">struct</span> <span class="type">GameOverView</span>: <span class="type">View</span> {
    <span class="property-wrapper">@Binding</span> <span class="keyword">var</span> showModal: <span class="type">Bool</span>
    <span class="property-wrapper">@Binding</span> <span class="keyword">var</span> coins: <span class="type">Int</span>
    
    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> {
        <span class="function">ZStack</span>{
            <span class="function">Color</span>(<span class="string">"ColorBlackTransparentRMIT"</span>)
                .<span class="function">edgesIgnoringSafeArea</span>(.all)
            
            <span class="function">VStack</span>{
                <span class="function">Text</span>(<span class="string">"GAME OVER"</span>)
                    .<span class="function">font</span>(.<span class="function">system</span>(.title, design: .rounded))
                    .<span class="function">fontWeight</span>(.heavy)
                    .<span class="function">foregroundColor</span>(<span class="type">Color</span>.white)
                    .<span class="function">padding</span>()
                    .<span class="function">frame</span>(minWidth: 280, idealWidth: 280, maxWidth: 320)
                    .<span class="function">background</span>(<span class="function">Color</span>(<span class="string">"ColorRedRMIT"</span>))
                
                <span class="function">Spacer</span>()
                
                <span class="function">VStack</span> {
                    <span class="function">Image</span>(<span class="string">"rmit-casino-logo"</span>)
                        .<span class="function">resizable</span>()
                        .<span class="function">scaledToFit</span>()
                        .<span class="function">frame</span>(maxHeight: 150)
                    
                    <span class="function">Text</span>(<span class="string">"You lost all money!\nYou are not the god of gambler!\n Good luck next time!"</span>)
                        .<span class="function">font</span>(.<span class="function">system</span>(.body, design: .rounded))
                        .<span class="function">foregroundColor</span>(<span class="type">Color</span>.white)
                        .<span class="function">multilineTextAlignment</span>(.center)
                    
                    <span class="function">Button</span> {
                        <span class="keyword">self</span>.showModal = <span class="literal">false</span>
                        <span class="keyword">self</span>.coins = 100
                        <span class="function">playSound</span>(sound: <span class="string">"ring-up"</span>, type: <span class="string">"mp3"</span>)
                    } label: {
                        <span class="function">Text</span>(<span class="string">"New Game"</span>.<span class="function">uppercased</span>())
                            .<span class="function">foregroundColor</span>(<span class="type">Color</span>.white)
                    }
                    .<span class="function">padding</span>(.<span class="variable">vertical</span>,10)
                    .<span class="function">padding</span>(.<span class="variable">horizontal</span>, 20)
                    .<span class="function">background</span>(
                        <span class="function">Capsule</span>()
                            .<span class="function">strokeBorder</span>(lineWidth: 2)
                            .<span class="function">foregroundColor</span>(<span class="function">Color</span>(<span class="string">"ColorRedRMIT"</span>))
                    )
                }
                
                <span class="function">Spacer</span>()
            }
            .<span class="function">frame</span>(minWidth: 280, idealWidth: 280, maxWidth: 320, minHeight: 280, idealHeight: 300, maxHeight: 350, alignment: .center)
            .<span class="function">background</span>(<span class="function">Color</span>(<span class="string">"ColorBlueRMIT"</span>))
            .<span class="function">cornerRadius</span>(20)
            .<span class="function">shadow</span>(color: <span class="function">Color</span>(<span class="string">"ColorBlackTransparentRMIT"</span>), radius: 15)
            
        }.<span class="function">onAppear</span>(perform: {
            <span class="function">playSound</span>(sound: <span class="string">"drum-music"</span>, type: <span class="string">"mp3"</span>)
        })
    }
}

<span class="comment">#Preview {</span>
    <span class="function">GameOverView</span>(showModal: .<span class="function">constant</span>(<span class="literal">true</span>), coins: .<span class="function">constant</span>(100))
<span class="comment">}</span></code></pre>
                    <pre><code><span class="comment">// ContentView.swift</span>
<span class="comment">// ...</span>
    <span class="property-wrapper">@State</span> <span class="keyword">var</span> animatingIcon = <span class="literal">true</span>
    
    <span class="comment">// ADD THIS STATE</span>
    <span class="property-wrapper">@State</span> <span class="keyword">private</span> <span class="keyword">var</span> showGameOverModal = <span class="literal">false</span>
    
    <span class="comment">// MARK: - Spin Logic</span>
<span class="comment">// ...</span>
    <span class="comment">// MARK: - Bet 10 Logic</span>
    <span class="keyword">func</span> <span class="function">chooseBet10</span>(){
        betAmount=10
        isChooseBet10=<span class="literal">true</span>
        isChooseBet20=<span class="literal">false</span>
        <span class="function">playSound</span>(sound: <span class="string">"bet-chip"</span>, type: <span class="string">"mp3"</span>)
    }
    
    <span class="comment">// ADD THIS FUNCTION</span>
    <span class="comment">// MARK: - Gameover</span>
    <span class="keyword">func</span> <span class="function">isGameOver</span>() {
        <span class="keyword">if</span> coins <= 0 {
            <span class="comment">// SHOW MODAL MESSAGE OF GAME OVER</span>
            showGameOverModal = <span class="literal">true</span>
            <span class="function">playSound</span>(sound: <span class="string">"gameover"</span>, type: <span class="string">"mp3"</span>)
        }
    }
    
    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> {
        <span class="function">ZStack</span> {
<span class="comment">// ...</span>
                    <span class="comment">// MARK: - Spin Button</span>
                    <span class="function">Button</span>(action: {
                        <span class="comment">// ... animation code ...</span>
                        
                        <span class="function">checkWinning</span>()
                        
                        <span class="comment">// ADD THIS CALL</span>
                        <span class="function">isGameOver</span>()
                    }, label: {
<span class="comment">// ...</span>
                .<span class="function">padding</span>(.<span class="variable">horizontal</span>, 20)
            }
            <span class="comment">// ADD THESE MODIFIERS AND THE CONDITIONAL VIEW</span>
            .<span class="function">padding</span>()
            .<span class="function">frame</span>(maxWidth: 720)
            .<span class="function">blur</span>(radius:  showGameOverModal ? 5 : 0 , opaque: <span class="literal">false</span>)
            
            <span class="keyword">if</span> showGameOverModal {
                <span class="function">GameOverView</span>(showModal: $showGameOverModal, coins: $coins)
            }
        }
    }
}
<span class="comment">// ...</span></code></pre>
                    <img src="../assets/guide_imgs/rmit_casino_part_2/step-13-game-over.gif" alt="Step 13 Game Over" class="img-large">
                </div>
            </div>
        </section>

        <section class="cheatsheet-section" id="add-info-screen">
            <h2 class="collapsible-header">
                ‚ÑπÔ∏è Step 14: Add an Information Screen
                <span class="collapse-icon"></span>
            </h2>
            <div class="collapsible-content">
                <div class="card instruction-step">
                    <h3>Add an Information Screen</h3>
                    <p><strong>Instruction:</strong>
                    <ol>
                        <li>Add a new <code>@State</code> variable <code>showingInfoView</code> to <code>ContentView.swift</code>.</li>
                        <li>Create a new <strong>SwiftUI View</strong> file in the <code>Views</code> folder named <code>InfoView.swift</code> and add the provided content.</li>
                        <li>In <code>ContentView.swift</code>, add an "info" button in an <code>.overlay()</code> modifier on the main <code>VStack</code>.</li>
                        <li>Add a <code>.sheet()</code> modifier to the main <code>ZStack</code> in <code>ContentView</code> to present the <code>InfoView</code>.</li>
                    </ol>
                    </p>
                    <p><strong>Explanation:</strong>
                    A good app should provide instructions. We'll add an info button that, when tapped, presents a "sheet" containing the <code>InfoView</code>. This view will explain the rules and provide some application details. The <code>.sheet()</code> modifier is SwiftUI's standard way of presenting modal content from the bottom of the screen.</p>
                    <pre><code><span class="comment">// Create new file Views/InfoView.swift</span>
<span class="keyword">import</span> <span class="type">SwiftUI</span>

<span class="keyword">struct</span> <span class="type">InfoView</span>: <span class="type">View</span> {
  <span class="property-wrapper">@Environment</span>(\.dismiss) <span class="keyword">var</span> dismiss
  
  <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> {
      <span class="function">ZStack</span>{
          <span class="function">Color</span>(<span class="string">"ColorBlueRMIT"</span>)
          <span class="function">VStack</span>(alignment: .center, spacing: 10) {
            <span class="function">LogoView</span>(logoFileName: <span class="string">"rmit-casino-logo"</span>)
            
            <span class="function">Spacer</span>()
            
            <span class="function">Form</span> {
              <span class="function">Section</span>(header: <span class="function">Text</span>(<span class="string">"How To Play"</span>)) {
                  <span class="function">Text</span>(<span class="string">"Just spin the reels to play."</span>)
                  <span class="function">Text</span>(<span class="string">"Matching all icons to win."</span>)
                  <span class="function">Text</span>(<span class="string">"The winning amount will be 10x of your betting amount."</span>)
                  <span class="function">Text</span>(<span class="string">"You can reset the money and highscore by clicking on the button Reset."</span>)
              }
                <span class="function">Section</span>(header: <span class="function">Text</span>(<span class="string">"Application Information"</span>)) {
                    <span class="function">HStack</span> {
                      <span class="function">Text</span>(<span class="string">"App Name"</span>)
                      <span class="function">Spacer</span>()
                      <span class="function">Text</span>(<span class="string">"RMIT Casino"</span>)
                    }
                    <span class="function">HStack</span> {
                      <span class="function">Text</span>(<span class="string">"Course"</span>)
                      <span class="function">Spacer</span>()
                      <span class="function">Text</span>(<span class="string">"COSC3062"</span>)
                    }
                    <span class="function">HStack</span> {
                      <span class="function">Text</span>(<span class="string">"Year Published"</span>)
                      <span class="function">Spacer</span>()
                      <span class="function">Text</span>(<span class="string">"2025"</span>)
                    }
                    <span class="function">HStack</span> {
                      <span class="function">Text</span>(<span class="string">"Location"</span>)
                      <span class="function">Spacer</span>()
                      <span class="function">Text</span>(<span class="string">"Saigon South Campus"</span>)
                    }
              }
            }
            .<span class="function">font</span>(.<span class="function">system</span>(.body, design: .rounded))
          }
          .<span class="function">padding</span>(.<span class="variable">top</span>, 40)
          .<span class="function">overlay</span>(
            <span class="function">Button</span>(action: {
              audioPlayer?.<span class="function">stop</span>()
              dismiss()
            }) {
              <span class="function">Image</span>(systemName: <span class="string">"xmark.circle"</span>)
                .<span class="function">font</span>(.title)
            }
            .<span class="function">foregroundColor</span>(.white)
            .<span class="function">padding</span>(.<span class="variable">top</span>, 30)
            .<span class="function">padding</span>(.<span class="variable">trailing</span>, 20),
            alignment: .topTrailing
            )
            .<span class="function">onAppear</span>(perform: {
              <span class="function">playSound</span>(sound: <span class="string">"drum-music"</span>, type: <span class="string">"mp3"</span>)
            })
      }
    
  }
}

<span class="comment">#Preview {</span>
    <span class="function">InfoView</span>()
<span class="comment">}</span></code></pre>
                    <pre><code><span class="comment">// ContentView.swift</span>
<span class="comment">// ...</span>
    <span class="property-wrapper">@State</span> <span class="keyword">var</span> animatingIcon = <span class="literal">true</span>
    
    <span class="comment">// ADD THIS STATE</span>
    <span class="property-wrapper">@State</span> <span class="keyword">private</span> <span class="keyword">var</span> showingInfoView = <span class="literal">false</span>
    <span class="property-wrapper">@State</span> <span class="keyword">private</span> <span class="keyword">var</span> showGameOverModal = <span class="literal">false</span>
    
    <span class="comment">// MARK: - Spin Logic</span>
<span class="comment">// ...</span>
    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> {
        <span class="function">ZStack</span> {
<span class="comment">// ...</span>
                .<span class="function">padding</span>(.<span class="variable">horizontal</span>, 20)
            }
            <span class="comment">// ADD THIS OVERLAY</span>
            .<span class="function">overlay</span>(
                <span class="comment">// MARK: - INFO GAME BUTTON</span>
                <span class="function">Button</span>(action: {
                    <span class="keyword">self</span>.showingInfoView = <span class="literal">true</span>
                }) {
                    <span class="function">Image</span>(systemName: <span class="string">"info.circle"</span>)
                        .<span class="function">foregroundColor</span>(.white)
                }
                    .<span class="function">modifier</span>(<span class="function">ButtonStyle</span>()), <span class="comment">// You may need to add this modifier to Modifiers.swift</span>
                alignment: .topTrailing
            )
            .<span class="function">padding</span>()
<span class="comment">// ...</span>
            <span class="keyword">if</span> showGameOverModal {
                <span class="function">GameOverView</span>(showModal: $showGameOverModal, coins: $coins)
            }
        }
        <span class="comment">// ADD THIS SHEET MODIFIER</span>
        .<span class="function">sheet</span>(isPresented: $showingInfoView) {
            <span class="function">InfoView</span>()
        }
    }
}</code></pre>
                    <pre><code><span class="comment">// Add to Helpers/Modifiers.swift</span>
<span class="comment">// ...</span>
<span class="keyword">import</span> <span class="type">Foundation</span>
<span class="keyword">import</span> <span class="type">SwiftUI</span>


<span class="keyword">struct</span> <span class="type">ButtonStyle</span>: <span class="type">ViewModifier</span> {
  <span class="keyword">func</span> body(content: <span class="type">Content</span>) -> <span class="keyword">some</span> <span class="type">View</span> {
    content
      .<span class="function">font</span>(.title)
      .<span class="function">accentColor</span>(<span class="type">Color</span>.white)
      .<span class="function">padding</span>()
  }
}

<span class="keyword">struct</span> <span class="type">ShadowModifier</span>: <span class="type">ViewModifier</span> {
<span class="comment">// ...</span></code></pre>
                    <img src="../assets/guide_imgs/rmit_casino_part_2/step-14-info-screen.gif" alt="Step 14 Info Screen" class="img-large">
                </div>
            </div>
        </section>

        <section class="cheatsheet-section" id="add-haptics">
            <h2 class="collapsible-header">
                üí• Step 15: Enhance User Experience with Haptic Feedback
                <span class="collapse-icon"></span>
            </h2>
            <div class="collapsible-content">
                <div class="card instruction-step">
                    <h3>Add Haptic Feedback on Win and Loss</h3>
                    <p><strong>Instruction:</strong>
                    Create a simple helper function to trigger haptic feedback and call it from the <code>playerWins()</code>, <code>newHighScore()</code>, and <code>playerLoses()</code> functions in <code>ContentView.swift</code>.</p>
                    <p><strong>Explanation:</strong>
                    Haptic feedback provides a physical sensation (like a vibration) to the user, which can make interactions feel more tangible and rewarding. SwiftUI makes it easy to trigger standard system haptics. We'll add a "success" notification for wins and an "error" notification for losses to enhance the user experience.</p>
                    <pre><code><span class="comment">// ContentView.swift</span>
<span class="comment">// ...</span>
    <span class="comment">// MARK: - Player Winning Logic</span>
    <span class="keyword">func</span> <span class="function">playerWins</span>() {
        coins += betAmount*10
        <span class="comment">// ADD HAPTIC</span>
        <span class="function">playHaptic</span>(type: .success)
    }

    <span class="comment">// MARK: - Highscore Logic</span>
    <span class="keyword">func</span> <span class="function">newHighScore</span>() {
        highscore = coins
        <span class="function">playSound</span>(sound: <span class="string">"highscore"</span>, type: <span class="string">"mp3"</span>)
        <span class="comment">// ADD HAPTIC</span>
        <span class="function">playHaptic</span>(type: .success)
    }
    
    <span class="comment">// MARK: - Player Lose Logic</span>
    <span class="keyword">func</span> <span class="function">playerLoses</span>(){
        coins -= betAmount
        <span class="comment">// ADD HAPTIC</span>
        <span class="function">playHaptic</span>(type: .error)
    }
    
    <span class="comment">// ADD THIS FUNCTION</span>
    <span class="comment">// MARK: - Haptic Feedback</span>
    <span class="keyword">func</span> <span class="function">playHaptic</span>(type: <span class="type">UINotificationFeedbackGenerator</span>.<span class="type">FeedbackType</span>) {
        <span class="keyword">let</span> generator = <span class="type">UINotificationFeedbackGenerator</span>()
        generator.<span class="function">notificationOccurred</span>(type)
    }
<span class="comment">// ...</span></code></pre>
                </div>
            </div>
        </section>

        <section class="cheatsheet-section" id="conclusion">
            <h2 class="collapsible-header">
                üéâ Congratulations!
                <span class="collapse-icon"></span>
            </h2>
            <div class="collapsible-content">
                <div class="card">
                    <h3>You've Done It!</h3>
                    <p>Congratulations! After following all these steps, your project will have all the features of the target project, including dynamic data, game logic, betting, animation, sound, and persistent high scores.</p>
                    <img src="../assets/guide_imgs/rmit_casino_part_2/congratulations.gif" alt="Congratulations" class="img-large">
                </div>
            </div>
        </section>

        <section class="cheatsheet-section" id="bonus-challenge">
            <h2 class="collapsible-header">
                üöÄ Bonus Challenge: Advanced Dice Game
                <span class="collapse-icon"></span>
            </h2>
            <div class="collapsible-content">
                <div class="card">
                    <h3>Part 1: High Scores and Multiple Views ‚≠ê</h3>
                    <p>We continue to polish and improve our lite version of RMIT Casino app, the fun dice game in the previous lab. This time, we add a new features:</p>
                    <p><strong>Three Views:</strong></p>
                    <ul>
                        <li>Homepage view which displays the title of the game, two buttons: 
                            <ul>
                                <li>one ‚ÄúPlay‚Äù button to take users to the Game view.</li>
                                <li>one ‚ÄúHighscores" button to open the Highscore view which displays a list of highscores as a sheet.</li>
                            </ul>
                        </li>
                    </ul>
                    <p>Make sure the list of highscores is persistent as you relaunch the launch by using UserDefaults to store highscores as an array/list in UserDefaults.</p>
                    <p>The sheet can be shown as half height and full height using medium or large presentationDetents.</p>
                    <p><strong>Game Rules:</strong></p>
                    <ul>
                        <li>You play blue dice.</li>
                        <li>The AI opponent plays red dice.</li>
                        <li>At each new game, you will start with the score to be 0.</li>
                        <li>When you press the ‚ÄúPlay‚Äù button, dice rolls are randomized.</li>
                        <li>If your total sum of dice is greater than your opponent then you will win and see the winning message like in the demo screenshot below, and add +10 points to your score. Otherwise (equal or less than), you lose and see the lost message and minus -10 points from your score.</li>
                        <li>You will start with 100 points. A game finishes when your score reaches 0. However, the high score of that game is the highest score you have reached, not the final end score.</li>
                        <li>So the list of high scores is the list of highest scores you have achieved so far.</li>
                    </ul>
                    <p><strong>Sound Effects:</strong></p>
                    <ul>
                        <li>Add some sound effects when you win or you lose.</li>
                        <li>You can select free game sound effects here:
                            <ul>
                                <li><a href="https://mixkit.co/free-sound-effects/game/" target="_blank">https://mixkit.co/free-sound-effects/game/</a></li>
                                <li><a href="https://pixabay.com/sound-effects/search/game/" target="_blank">https://pixabay.com/sound-effects/search/game/</a></li>
                            </ul>
                        </li>
                    </ul>
                    <p>All image assets of this dice game can be downloaded on Canvas. However you are encouraged to choose your own image assets and colorsets.</p>
                    <img src="../assets/guide_imgs/rmit_casino_part_2/dice-game-part-1.png" alt="Dice Game Challenge Part 1" class="img-large">
                </div>
                <div class="card">
                    <h3>Part 2: Dice Animation ‚≠ê‚≠ê</h3>
                    <p>Let's try to create a dice animation for our tutorial dice game. Apply what you have learn so far in this week, can you create a dice animation like so in the game:</p>
                    <ul>
                        <li><strong>Start Animation:</strong> When "Play" is pressed, a timer starts with a short interval (0.1 seconds).</li>
                        <li><strong>Randomize Dice Values:</strong> The timer repeatedly updates dice values with random numbers (1-6) to simulate rolling.</li>
                        <li><strong>Control Duration:</strong> The dice animation continues for a set duration (1.5 seconds) using a timer.</li>
                        <li><strong>Stop Animation:</strong> The timer stops after the duration is reached, final dice values are set for the game result.</li>
                        <li><strong>Display Outcome:</strong> The game determines if the player won or lost, updates the score, and plays the corresponding sound effect.</li>
                    </ul>
                    <img src="../assets/guide_imgs/rmit_casino_part_2/dice-game-part-2.gif" alt="Dice Game Challenge Part 2" class="img-large">
                </div>
            </div>
        </section>
    </main>

    <footer>
        <p>¬© 2025 Created by Tom Huynh with love ‚ù§Ô∏è</p>
    </footer>

    <script src="../js/main.js"></script>
</body>
</html>
